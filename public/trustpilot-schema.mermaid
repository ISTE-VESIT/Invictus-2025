erDiagram
    USERS ||--o{ REVIEWS : writes
    USERS ||--o{ BUSINESSES : owns
    USERS ||--o{ BUSINESSES : manages
    USERS ||--o{ NOTIFICATIONS : receives
    USERS ||--o{ BUSINESS_CLAIMS : submits
    USERS ||--o{ REPORTS : files
    USERS ||--o{ ACTIVITY_LOG : generates
    
    BUSINESSES ||--o{ REVIEWS : receives
    BUSINESSES }o--o{ CATEGORIES : "belongs to"
    BUSINESSES ||--o{ BUSINESS_CLAIMS : "claimed via"
    BUSINESSES ||--o{ INVITATION_REQUESTS : sends
    
    REVIEWS ||--o| REVIEW_RESPONSES : "has response"
    REVIEWS ||--o{ REPORTS : "reported via"
    REVIEWS ||--o{ NOTIFICATIONS : triggers
    
    CATEGORIES ||--o{ CATEGORIES : "has subcategories"
    
    USERS {
        ObjectId _id PK
        string email UK
        string passwordHash
        object profile
        string role
        boolean emailVerified
        array managedBusinesses FK
        array fcmTokens
        object stats
        timestamp createdAt
    }
    
    BUSINESSES {
        ObjectId _id PK
        string name
        string slug UK
        string description
        object contact
        array locations
        array categories FK
        ObjectId ownerId FK
        ObjectId claimedBy FK
        object rating
        object stats
        string status
        timestamp createdAt
    }
    
    REVIEWS {
        ObjectId _id PK
        ObjectId businessId FK
        ObjectId userId FK
        object rating
        string title
        string content
        boolean verified
        boolean wouldRecommend
        array images
        object helpful
        object response
        string status
        timestamp createdAt
    }
    
    CATEGORIES {
        ObjectId _id PK
        string name
        string slug UK
        ObjectId parentId FK
        array ratingAspects
        number businessCount
        boolean isActive
    }
    
    NOTIFICATIONS {
        ObjectId _id PK
        ObjectId userId FK
        string type
        string message
        ObjectId relatedId FK
        string relatedType
        boolean read
        string firebaseMessageId
        timestamp createdAt
    }
    
    BUSINESS_CLAIMS {
        ObjectId _id PK
        ObjectId businessId FK
        ObjectId userId FK
        array documents
        string status
        ObjectId reviewedBy FK
        timestamp createdAt
    }
    
    REPORTS {
        ObjectId _id PK
        ObjectId reportedBy FK
        string reportedEntityType
        ObjectId reportedEntityId FK
        string reason
        string status
        ObjectId resolvedBy FK
        timestamp createdAt
    }
    
    ACTIVITY_LOG {
        ObjectId _id PK
        ObjectId userId FK
        string action
        string entityType
        ObjectId entityId FK
        object details
        timestamp createdAt
    }
    
    INVITATION_REQUESTS {
        ObjectId _id PK
        ObjectId businessId FK
        object sentTo
        ObjectId invitedBy FK
        string token UK
        ObjectId reviewId FK
        string status
        timestamp createdAt
    }
    
    REVIEW_RESPONSES {
        ObjectId reviewId FK
        string content
        ObjectId respondedBy FK
        timestamp respondedAt
    }
